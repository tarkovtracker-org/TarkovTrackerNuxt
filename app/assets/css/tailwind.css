@import 'tailwindcss';
@import '@nuxt/ui';

/* =========================================
   1. GLOBAL RESETS
   ========================================= */
/* Smooth scrolling for hash anchor navigation */
html {
  scroll-behavior: smooth;
}

/* Global Interactive & Cursor Fixes */
button,
[role='button'],
input[type='submit'],
input[type='reset'],
input[type='button'],
label[for],
select,
a {
  cursor: pointer;
}

button:disabled,
[role='button'][aria-disabled='true'],
input:disabled,
select:disabled,
.disabled,
.leaflet-disabled {
  cursor: not-allowed !important;
}

/* =========================================
   2. THEME CONFIGURATION
   ========================================= */
/* Tailwind v4 + Nuxt UI v4 theme tokens */
@layer base {
  /* Apply a global focus ring that follows game mode accent color */
  button,
  a,
  input,
  select,
  textarea,
  [tabindex]:not([tabindex='-1']) {
    @apply focus-visible:ring-accent-500 focus:outline-none focus-visible:ring-2;
  }

  /* Global Fixes for Nuxt UI Components */
  [role='option'] {
    cursor: pointer !important;
  }

  input[role='combobox'] {
    border-bottom-left-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
  }
}
@theme {
  --font-sans: 'Share Tech Mono', ui-sans-serif, system-ui, sans-serif;
  --font-mono:
    'Share Tech Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
    'Courier New', monospace;

  /* --- HSL Color Palettes (Primitives) --- */

  /* Primary (Brand Tan) - The core brand primitive */
  --color-primary-50: hsl(42 31.3% 93.7%);
  --color-primary-100: hsl(39 28.8% 88.4%);
  --color-primary-200: hsl(40 27.7% 76.7%);
  --color-primary-300: hsl(40 28.1% 65.1%);
  --color-primary-400: hsl(40 28% 53.1%);
  --color-primary-500: hsl(39 20.5% 50.2%);
  --color-primary-600: hsl(38 20.7% 45.5%);
  --color-primary-700: hsl(38 21.1% 35.3%);
  --color-primary-800: hsl(37 17.3% 26.1%);
  --color-primary-900: hsl(33 10.6% 16.7%);
  --color-primary-950: hsl(40 13% 9%);

  /* Blue (Primitive) - Deep Slate Blue */
  --color-blue-50: hsl(222 33.3% 92.4%);
  --color-blue-100: hsl(221 31.6% 84.5%);
  --color-blue-200: hsl(224 23.9% 69.6%);
  --color-blue-300: hsl(224 21.2% 54.7%);
  --color-blue-400: hsl(222 26.2% 40.4%);
  --color-blue-500: hsl(215 50% 22.7%);
  --color-blue-600: hsl(216 51% 19.2%);
  --color-blue-700: hsl(217 52.5% 15.7%);
  --color-blue-800: hsl(217 56.7% 11.8%);
  --color-blue-900: hsl(218 62.8% 8.4%);
  --color-blue-950: hsl(217 64.3% 5.5%);

  /* Green (Primitive) */
  --color-green-50: hsl(150 42.9% 94.5%);
  --color-green-100: hsl(150 42.9% 89%);
  --color-green-200: hsl(149 42.3% 78.2%);
  --color-green-300: hsl(150 42.5% 67.3%);
  --color-green-400: hsl(149 43% 56.7%);
  --color-green-500: hsl(150 59.2% 41.4%);
  --color-green-600: hsl(150 59.3% 33.7%);
  --color-green-700: hsl(151 59.4% 26.1%);
  --color-green-800: hsl(152 59.6% 18.4%);
  --color-green-900: hsl(155 60% 10.8%);
  --color-green-950: hsl(152 58.6% 5.7%);

  /* Amber (Primitive) */
  --color-amber-50: hsl(39 100% 96.1%);
  --color-amber-100: hsl(38 96.1% 90%);
  --color-amber-200: hsl(38 96.2% 79.4%);
  --color-amber-300: hsl(37 95% 68.4%);
  --color-amber-400: hsl(33 93.1% 60.4%);
  --color-amber-500: hsl(38 92.1% 50.2%);
  --color-amber-600: hsl(32 94.6% 43.7%);
  --color-amber-700: hsl(26 90.5% 37.1%);
  --color-amber-800: hsl(23 82.5% 31.4%);
  --color-amber-900: hsl(22 77.8% 26.5%);
  --color-amber-950: hsl(21 91.7% 14.1%);

  /* Red (Primitive) */
  --color-red-50: hsl(356 100% 97.3%);
  --color-red-100: hsl(356 100% 94.7%);
  --color-red-200: hsl(353 96.1% 90%);
  --color-red-300: hsl(353 95.7% 81.8%);
  --color-red-400: hsl(351 94.5% 71.4%);
  --color-red-500: hsl(0 84.2% 60.2%);
  --color-red-600: hsl(0 72.2% 50.6%);
  --color-red-700: hsl(0 73.7% 41.8%);
  --color-red-800: hsl(0 70% 35.3%);
  --color-red-900: hsl(0 62.8% 30.6%);
  --color-red-950: hsl(0 74.7% 15.5%);

  /* Accent (Dynamic) - Points to PvP by default, switched via .pve-mode class */
  /* These are CSS custom property references that will be overridden in :root.pve-mode */
  --color-accent-50: var(--color-pvp-50);
  --color-accent-100: var(--color-pvp-100);
  --color-accent-200: var(--color-pvp-200);
  --color-accent-300: var(--color-pvp-300);
  --color-accent-400: var(--color-pvp-400);
  --color-accent-500: var(--color-pvp-500);
  --color-accent-600: var(--color-pvp-600);
  --color-accent-700: var(--color-pvp-700);
  --color-accent-800: var(--color-pvp-800);
  --color-accent-900: var(--color-pvp-900);
  --color-accent-950: var(--color-pvp-950);

  /* Surface (Primitive) - Neutral Grays (Warm/Bronze Tint) */
  --color-surface-50: hsl(40 10% 97%);
  --color-surface-100: hsl(40 8% 92%);
  --color-surface-200: hsl(40 8% 83%);
  --color-surface-300: hsl(40 6% 65%);
  --color-surface-400: hsl(40 5% 46%);
  --color-surface-500: hsl(40 5% 34%);
  --color-surface-600: hsl(40 5% 26%);
  --color-surface-700: hsl(40 6% 19%);
  --color-surface-800: hsl(40 7% 11%);
  --color-surface-900: hsl(40 8% 7%);
  --color-surface-950: hsl(40 10% 3.5%);

  /* PvP (Primitive) - Matches Primary (Brand Tan) for seamless default experience */
  --color-pvp-50: hsl(42 31.3% 93.7%);
  --color-pvp-100: hsl(39 28.8% 88.4%);
  --color-pvp-200: hsl(40 27.7% 76.7%);
  --color-pvp-300: hsl(40 28.1% 65.1%);
  --color-pvp-400: hsl(40 28% 53.1%);
  --color-pvp-500: hsl(39 20.5% 50.2%);
  --color-pvp-600: hsl(38 20.7% 45.5%);
  --color-pvp-700: hsl(38 21.1% 35.3%);
  --color-pvp-800: hsl(37 17.3% 26.1%);
  --color-pvp-900: hsl(33 10.6% 16.7%);
  --color-pvp-950: hsl(40 13% 9%);

  /* PvE (Primitive) - In-game Blue (adjusted to match logo filter) */
  --color-pve-50: hsl(220 50% 96%);
  --color-pve-100: hsl(220 50% 92%);
  --color-pve-200: hsl(222 48% 84%);
  --color-pve-300: hsl(224 46% 74%);
  --color-pve-400: hsl(226 40% 62%);
  --color-pve-500: hsl(228 38% 52%);
  --color-pve-600: hsl(230 36% 44%);
  --color-pve-700: hsl(232 34% 36%);
  --color-pve-800: hsl(234 32% 28%);
  --color-pve-900: hsl(236 30% 20%);
  --color-pve-950: hsl(238 28% 14%);

  /* --- Semantic Mappings (Aliases) --- */

  /* Brand Aliases */
  --color-brand-50: var(--color-primary-50);
  --color-brand-100: var(--color-primary-100);
  --color-brand-200: var(--color-primary-200);
  --color-brand-300: var(--color-primary-300);
  --color-brand-400: var(--color-primary-400);
  --color-brand-500: var(--color-primary-500);
  --color-brand-600: var(--color-primary-600);
  --color-brand-700: var(--color-primary-700);
  --color-brand-800: var(--color-primary-800);
  --color-brand-900: var(--color-primary-900);
  --color-brand-950: var(--color-primary-950);

  /* Secondary -> Blue */
  --color-secondary-50: var(--color-blue-50);
  --color-secondary-100: var(--color-blue-100);
  --color-secondary-200: var(--color-blue-200);
  --color-secondary-300: var(--color-blue-300);
  --color-secondary-400: var(--color-blue-400);
  --color-secondary-500: var(--color-blue-500);
  --color-secondary-600: var(--color-blue-600);
  --color-secondary-700: var(--color-blue-700);
  --color-secondary-800: var(--color-blue-800);
  --color-secondary-900: var(--color-blue-900);
  --color-secondary-950: var(--color-blue-950);

  /* Success -> Green */
  --color-success-50: var(--color-green-50);
  --color-success-100: var(--color-green-100);
  --color-success-200: var(--color-green-200);
  --color-success-300: var(--color-green-300);
  --color-success-400: var(--color-green-400);
  --color-success-500: var(--color-green-500);
  --color-success-600: var(--color-green-600);
  --color-success-700: var(--color-green-700);
  --color-success-800: var(--color-green-800);
  --color-success-900: var(--color-green-900);
  --color-success-950: var(--color-green-950);

  /* Warning -> Amber */
  --color-warning-50: var(--color-amber-50);
  --color-warning-100: var(--color-amber-100);
  --color-warning-200: var(--color-amber-200);
  --color-warning-300: var(--color-amber-300);
  --color-warning-400: var(--color-amber-400);
  --color-warning-500: var(--color-amber-500);
  --color-warning-600: var(--color-amber-600);
  --color-warning-700: var(--color-amber-700);
  --color-warning-800: var(--color-amber-800);
  --color-warning-900: var(--color-amber-900);
  --color-warning-950: var(--color-amber-950);

  /* Error -> Red */
  --color-error-50: var(--color-red-50);
  --color-error-100: var(--color-red-100);
  --color-error-200: var(--color-red-200);
  --color-error-300: var(--color-red-300);
  --color-error-400: var(--color-red-400);
  --color-error-500: var(--color-red-500);
  --color-error-600: var(--color-red-600);
  --color-error-700: var(--color-red-700);
  --color-error-800: var(--color-red-800);
  --color-error-900: var(--color-red-900);
  --color-error-950: var(--color-red-950);

  /* Gray -> Surface */
  --color-gray-50: var(--color-surface-50);
  --color-gray-100: var(--color-surface-100);
  --color-gray-200: var(--color-surface-200);
  --color-gray-300: var(--color-surface-300);
  --color-gray-400: var(--color-surface-400);
  --color-gray-500: var(--color-surface-500);
  --color-gray-600: var(--color-surface-600);
  --color-gray-700: var(--color-surface-700);
  --color-gray-800: var(--color-surface-800);
  --color-gray-900: var(--color-surface-900);
  --color-gray-950: var(--color-surface-950);

  /* Yellow -> Amber */
  --color-yellow-50: var(--color-amber-50);
  --color-yellow-100: var(--color-amber-100);
  --color-yellow-200: var(--color-amber-200);
  --color-yellow-300: var(--color-amber-300);
  --color-yellow-400: var(--color-amber-400);
  --color-yellow-500: var(--color-amber-500);
  --color-yellow-600: var(--color-amber-600);
  --color-yellow-700: var(--color-amber-700);
  --color-yellow-800: var(--color-amber-800);
  --color-yellow-900: var(--color-amber-900);
  --color-yellow-950: var(--color-amber-950);

  /* Orange -> Amber (Legacy mapping) */
  --color-orange-50: var(--color-amber-50);
  --color-orange-100: var(--color-amber-100);
  --color-orange-200: var(--color-amber-200);
  --color-orange-300: var(--color-amber-300);
  --color-orange-400: var(--color-amber-400);
  --color-orange-500: var(--color-amber-500);
  --color-orange-600: var(--color-amber-600);
  --color-orange-700: var(--color-amber-700);
  --color-orange-800: var(--color-amber-800);
  --color-orange-900: var(--color-amber-900);
  --color-orange-950: var(--color-amber-950);

  /* Cyan -> Blue (Legacy mapping) */
  --color-cyan-50: var(--color-blue-50);
  --color-cyan-100: var(--color-blue-100);
  --color-cyan-200: var(--color-blue-200);
  --color-cyan-300: var(--color-blue-300);
  --color-cyan-400: var(--color-blue-400);
  --color-cyan-500: var(--color-blue-500);
  --color-cyan-600: var(--color-blue-600);
  --color-cyan-700: var(--color-blue-700);
  --color-cyan-800: var(--color-blue-800);
  --color-cyan-900: var(--color-blue-900);
  --color-cyan-950: var(--color-blue-950);

  /* Custom semantic colors for Tarkov Tracker */
  --color-complete: #114200;
  --color-failed: #ffcccc;
  --color-tasklink: #00acc1;
  --color-link: #118cf7;
  --color-enough: #001638;
  --color-questlink: #f5f5f5;
  --color-objectiveahead: #193011;
  --color-objectivecomplete: #114400;
  --color-objectiveuncomplete: #391111;
  --color-objectiveenough: #2e455a;
  --color-chartbase: #ffffff;
  --color-sitebackground: #0a0a09;
  --color-contentbackground: #181817;
  --color-border: #1f1f1f;
  --color-link: hsl(187 100% 38%);

  /* --- Entities --- */
  --color-entity-lightkeeper: var(--color-amber-500);
  --color-entity-kappa: var(--color-entity-twitch);
  --color-entity-discord: #5865f2;
  --color-entity-twitch: #9146ff;

  /* --- Task Status --- */
  --color-task-locked: var(--color-gray-400);
  --color-task-available: var(--color-accent-600);
  --color-task-complete: var(--color-success-600);
  --color-task-failed: var(--color-error-600);
  --color-task-blocked: var(--color-gray-600);

  /* --- Filters --- */
  --color-filter-all: var(--color-blue-500);

  /* --- Rewards --- */
  --color-reward-item: var(--color-surface-400);
  --color-reward-skill: var(--color-success-600);
  --color-reward-trader: var(--color-warning-600);
  --color-reward-xp: var(--color-accent-600);

  /* --- Map Markers --- */
  --color-map-marker-self: var(--color-error-500);
  --color-map-marker-team: var(--color-warning-500);
  --color-map-extract-pmc: var(--color-success-500);
  --color-map-extract-scav: var(--color-warning-400);
  --color-map-extract-coop: var(--color-secondary-400);
}

/* Modern override: use OKLCH where supported for better perceptual consistency */
@supports (color: oklch(0 0 0)) {
  :root {
    /* Primary (Brand Tan) */
    --color-primary-50: oklch(0.958531 0.009845 87.47);
    --color-primary-100: oklch(0.920558 0.016115 82.79);
    --color-primary-200: oklch(0.838958 0.032256 84.59);
    --color-primary-300: oklch(0.756775 0.049173 83.87);
    --color-primary-400: oklch(0.672055 0.066713 84.66);
    --color-primary-500: oklch(0.634237 0.052556 83.12);
    --color-primary-600: oklch(0.588274 0.048467 80.24);
    --color-primary-700: oklch(0.492406 0.040305 80.92);
    --color-primary-800: oklch(0.395258 0.025655 78.78);
    --color-primary-900: oklch(0.291603 0.010623 73.5);
    --color-primary-950: oklch(0.209826 0.008289 84.59);

    /* Blue (Primitive) */
    --color-blue-50: oklch(0.933589 0.01289 266.7);
    --color-blue-100: oklch(0.865894 0.025072 265.57);
    --color-blue-200: oklch(0.735887 0.040669 269.31);
    --color-blue-300: oklch(0.602803 0.057139 269.2);
    --color-blue-400: oklch(0.477669 0.064863 266.44);
    --color-blue-500: oklch(0.327642 0.067796 257.27);
    --color-blue-600: oklch(0.292776 0.060937 258.3);
    --color-blue-700: oklch(0.256853 0.053894 259.68);
    --color-blue-800: oklch(0.218257 0.045393 259.58);
    --color-blue-900: oklch(0.182933 0.038192 260.22);
    --color-blue-950: oklch(0.152955 0.026875 256.54);

    /* Surface (Primitive) */
    --color-surface-50: oklch(0.979129 0 0);
    --color-surface-100: oklch(0.937332 0.001336 286.37);
    --color-surface-200: oklch(0.870523 0.002724 286.34);
    --color-surface-300: oklch(0.711815 0.012937 286.07);
    --color-surface-400: oklch(0.551664 0.013808 285.94);
    --color-surface-500: oklch(0.441861 0.014617 285.79);
    --color-surface-600: oklch(0.370323 0.01188 285.81);
    --color-surface-700: oklch(0.307158 0.008887 285.86);
    --color-surface-800: oklch(0.227713 0.005742 285.93);
    --color-surface-900: oklch(0.182204 0 0);
    --color-surface-950: oklch(0.144335 0.002191 106.67);

    /* PvP (Primitive) - Matches Primary OKLCH values */
    --color-pvp-50: oklch(0.958531 0.009845 87.47);
    --color-pvp-100: oklch(0.920558 0.016115 82.79);
    --color-pvp-200: oklch(0.838958 0.032256 84.59);
    --color-pvp-300: oklch(0.756775 0.049173 83.87);
    --color-pvp-400: oklch(0.672055 0.066713 84.66);
    --color-pvp-500: oklch(0.634237 0.052556 83.12);
    --color-pvp-600: oklch(0.588274 0.048467 80.24);
    --color-pvp-700: oklch(0.492406 0.040305 80.92);
    --color-pvp-800: oklch(0.395258 0.025655 78.78);
    --color-pvp-900: oklch(0.291603 0.010623 73.5);
    --color-pvp-950: oklch(0.209826 0.008289 84.59);

    /* PvE (Primitive) - Adjusted to match logo indigo-blue */
    --color-pve-50: oklch(0.968 0.012 260);
    --color-pve-100: oklch(0.938 0.024 260);
    --color-pve-200: oklch(0.875 0.048 262);
    --color-pve-300: oklch(0.790 0.072 264);
    --color-pve-400: oklch(0.680 0.090 266);
    --color-pve-500: oklch(0.580 0.100 268);
    --color-pve-600: oklch(0.500 0.090 270);
    --color-pve-700: oklch(0.420 0.078 272);
    --color-pve-800: oklch(0.340 0.064 274);
    --color-pve-900: oklch(0.270 0.050 276);
    --color-pve-950: oklch(0.200 0.040 278);

    /* --- Stash Grid Palette (In-Game Inventory Look) --- */
    /* Base Grid Cell - Defined in :root for Theme Switching */
    /* See :root and :root.dark below for stash-base/border */

    --color-stash-violet: rgba(80, 40, 140, 0.2);
    --color-stash-orange: rgba(255, 120, 0, 0.15);
    --color-stash-yellow: rgba(255, 220, 0, 0.15);
    --color-stash-green: rgba(35, 140, 35, 0.2);
    --color-stash-red: rgba(220, 20, 20, 0.15);
    --color-stash-blue: rgba(0, 180, 255, 0.1);
    --color-stash-grey: rgba(80, 80, 80, 0.25);
    /* Default overlay: Transparent in light (to see grey base), White wash in dark */
    --color-stash-default: transparent;
    --color-stash-black: rgba(0, 0, 0, 0.4);

    /* Green (Primitive) */
    --color-green-50: oklch(0.965519 0.014927 164.73);
    --color-green-100: oklch(0.931196 0.029926 164.27);
    --color-green-200: oklch(0.863905 0.059052 162.68);
    --color-green-300: oklch(0.79743 0.088319 161.44);
    --color-green-400: oklch(0.736257 0.116315 159.14);
    --color-green-500: oklch(0.649631 0.141844 156.41);
    --color-green-600: oklch(0.559979 0.121157 156.43);
    --color-green-700: oklch(0.46706 0.097494 157.65);
    --color-green-800: oklch(0.369067 0.07332 159.01);
    --color-green-900: oklch(0.264206 0.046811 162.19);
    --color-green-950: oklch(0.186477 0.028937 162.03);

    /* Amber (Primitive) */
    --color-amber-50: oklch(0.98104 0.018694 83.06);
    --color-amber-100: oklch(0.949545 0.045027 81.33);
    --color-amber-200: oklch(0.899074 0.0909 80.83);
    --color-amber-300: oklch(0.845249 0.130158 77.76);
    --color-amber-400: oklch(0.784963 0.150798 67.43);
    --color-amber-500: oklch(0.76859 0.164659 70.08);
    --color-amber-600: oklch(0.66584 0.157422 58.32);
    --color-amber-700: oklch(0.555283 0.145505 49);
    --color-amber-800: oklch(0.473189 0.124699 46.2);
    --color-amber-900: oklch(0.413707 0.105365 45.9);
    --color-amber-950: oklch(0.279124 0.074197 45.64);

    /* Red (Primitive) */
    --color-red-50: oklch(0.96941 0.015168 12.42);
    --color-red-100: oklch(0.941366 0.029778 12.58);
    --color-red-200: oklch(0.892447 0.05591 10);
    --color-red-300: oklch(0.809664 0.106109 11.64);
    --color-red-400: oklch(0.719186 0.168984 13.43);
    --color-red-500: oklch(0.636834 0.207849 25.33);
    --color-red-600: oklch(0.577099 0.215157 27.33);
    --color-red-700: oklch(0.50542 0.190493 27.52);
    --color-red-800: oklch(0.443687 0.161321 26.9);
    --color-red-900: oklch(0.395843 0.133073 25.72);
    --color-red-950: oklch(0.257518 0.088559 26.04);
  }
}

/* Nuxt UI core tokens mapped to Tarkov Tracker theme */
:root {
  /* Light Mode Defaults */
  --ui-bg: #ffffff;
  --ui-bg-muted: #fafafa;
  --ui-bg-elevated: #ffffff;
  --ui-bg-accented: #f4f4f5;
  --ui-bg-inverted: #121212;
  --ui-text: #18181b;
  --ui-text-muted: #71717a;
  --ui-text-highlighted: #855d28;
  --ui-text-dimmed: #a1a1aa;
  --ui-text-inverted: #f8f8f8;

  /* Light mode border overrides - references accent for game mode switching */
  --ui-border: var(--color-accent-200);
  --ui-border-accented: var(--color-accent-300);
  --ui-color-neutral-700: var(--color-accent-300);

  /* Primary token for light mode - references accent for game mode switching */
  --ui-primary: var(--color-accent-600);

  /* --- Stash Grid (Light Mode) --- */
  --color-stash-base: #aaaaaa;
  --color-stash-border: #a7a7ab;
  --stash-shadow: inset 0 0 5px rgba(0, 0, 0, 0.15); /* Slightly deeper shadow */
  --stash-sheen: rgba(255, 255, 255, 0.12); /* Slightly less sheen */
}

:root.dark {
  --ui-bg: #121212;
  --ui-bg-muted: #0a0a09;
  --ui-bg-elevated: #1c1c1f;
  --ui-bg-accented: #242f35;
  --ui-bg-inverted: #ffffff;
  --ui-text: #f8f8f8;
  --ui-text-muted: #a1a1aa;
  --ui-text-highlighted: #9a8866;
  --ui-text-dimmed: #71717a;
  --ui-text-inverted: #f8f8f8;

  /* Overwrite Nuxt UI defaults that pointed to neutral-700 - references accent for game mode switching */
  --ui-border: var(--color-accent-800);
  --ui-border-accented: var(--color-accent-700);
  --ui-color-neutral-700: var(--color-accent-700);

  /* Set Nuxt UI primary token used by dark theme buttons - references accent for game mode switching */
  --ui-primary: var(--color-accent-500);

  /* --- Dark Mode Semantic Overrides --- */
  --color-task-complete: var(--color-success-500);
  --color-task-failed: var(--color-error-500);

  /* --- Stash Grid (Dark Mode) --- */
  --color-stash-base: #141414; /* Very dark grey, almost black */
  --color-stash-border: #303030; /* Subtle metallic border */
  --stash-shadow: inset 0 0 4px rgba(0, 0, 0, 0.8); /* Deep shadow */
  --stash-sheen: rgba(255, 255, 255, 0.02); /* Subtle sheen */

  /* Re-apply white wash for default items in dark mode */
  --color-stash-default: rgba(255, 255, 255, 0.22);
}

/* =========================================
   2.5 GAME MODE COLOR SWITCHING (PvE Mode)
   ========================================= */
/* When .pve-mode is applied to <html>, switch accent colors to PvE blue */
:root.pve-mode,
:root.pve-mode.dark {
  --color-accent-50: var(--color-pve-50);
  --color-accent-100: var(--color-pve-100);
  --color-accent-200: var(--color-pve-200);
  --color-accent-300: var(--color-pve-300);
  --color-accent-400: var(--color-pve-400);
  --color-accent-500: var(--color-pve-500);
  --color-accent-600: var(--color-pve-600);
  --color-accent-700: var(--color-pve-700);
  --color-accent-800: var(--color-pve-800);
  --color-accent-900: var(--color-pve-900);
  --color-accent-950: var(--color-pve-950);
}

/* Logo filter utilities for game-mode-based tinting */
/* PvP: warm tan tint (applied in light mode, no tint needed in dark mode) */
.logo-pvp-tint {
  filter: sepia(0.15) saturate(1.2) brightness(0.95);
}
.dark .logo-pvp-tint {
  filter: none;
}

/* PvE: cool blue tint */
.logo-pve-tint {
  filter: sepia(0.2) saturate(1.6) hue-rotate(170deg) brightness(0.9);
}
.dark .logo-pve-tint {
  filter: sepia(0.15) saturate(1.4) hue-rotate(175deg) brightness(1.1);
}

/* =========================================
   3. COMPONENT & FRAMEWORK OVERRIDES
   ========================================= */
/* Utility: default ring color aligned to brand (dynamic accent) */
.ring-default {
  --tw-ring-color: var(--color-accent-700);
}
/* Utility: force accented ring to brand as well */
.ring-accented {
  --tw-ring-color: var(--ui-border-accented);
}

/* Nav text overrides: replace gray-400 default with pure white at stepped opacities */
/* Scoped to dark mode to prevent white-on-white in light mode */
.dark .text-gray-400 {
  color: rgba(255, 255, 255, 0.6);
}
.dark .text-gray-500 {
  color: rgba(255, 255, 255, 0.7);
}
.dark .text-gray-300 {
  color: rgba(255, 255, 255, 0.8);
}
.dark .text-gray-200 {
  color: rgba(255, 255, 255, 0.9);
}

/* =========================================
   4. SEMANTIC UTILITIES & EFFECTS
   ========================================= */
@layer utilities {
  /* Semantic Backgrounds for Light/Dark switching */
  .bg-surface-base {
    @apply bg-gray-100 dark:bg-[#0a0a09]; /* Darkened base for OLED feel */
  }
  .bg-surface-elevated {
    @apply bg-white shadow-sm dark:bg-[#151516]; /* Lighter than base */
  }
  .bg-surface-floating {
    @apply bg-white shadow-md dark:bg-[#1e1e20]; /* Even lighter */
  }

  /* Semantic Text */
  .text-content-primary {
    @apply text-gray-900;
  }
  .dark .text-content-primary {
    color: rgba(255, 255, 255, 0.8);
  }
  .text-content-secondary {
    @apply text-gray-600;
  }
  .dark .text-content-secondary {
    color: rgba(255, 255, 255, 0.6); /* Matches legacy text-gray-300 override */
  }

  .text-content-tertiary {
    @apply text-gray-500;
  }
  .dark .text-content-tertiary {
    color: rgba(255, 255, 255, 0.6); /* Matches legacy text-gray-400 override */
  }

  /* Universal Border */
  .border-base {
    @apply border-gray-200 dark:border-white/10;
  }

  /* Semantic Divider (background) */
  .bg-divider {
    @apply bg-gray-200 dark:bg-white/10;
  }

  /* --- Stash Grid Utilities --- */
  /* Base cell style (mimics empty inventory slot) */
  .bg-stash-cell {
    background-color: var(--color-stash-base);
    background-image: linear-gradient(
      135deg,
      var(--stash-sheen) 0%,
      transparent 100%
    ); /* Adaptive sheen */
    box-shadow: var(--stash-shadow); /* Adaptive shadow */
  }

  /* Semantic Task Status Backgrounds */
  .bg-task-complete {
    background-color: var(--color-task-complete);
  }
  .bg-task-failed {
    background-color: var(--color-task-failed);
  }
  .bg-task-locked {
    background-color: var(--color-task-locked);
  }
  .bg-task-available {
    background-color: var(--color-task-available);
  }
  .bg-task-blocked {
    background-color: var(--color-task-blocked);
  }

  /* Overlay utility */
  .overlay-stash-bg {
    @apply absolute inset-[1px] rounded; /* Slight indent to show border */
    mix-blend-mode: normal;
  }

  /* Holiday candy cane progress bar effect */
  .candy-cane {
    background: repeating-linear-gradient(
      45deg,
      #dc2626,
      #dc2626 10px,
      #fafafa 10px,
      #fafafa 20px
    ) !important;
    background-size: 200% 100%;
    animation: candy-cane-move 2s linear infinite;
  }

  .scanline {
    animation: scanline 8s linear infinite;
  }
  .glitch-text {
    position: relative;
    animation: glitch-skew 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
  }
  .glitch-text::before,
  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  .glitch-text::before {
    left: 2px;
    text-shadow: -2px 0 #ff00c1;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim 2s infinite linear alternate-reverse;
  }
  .glitch-text::after {
    left: -2px;
    text-shadow: -2px 0 #00fff9;
    clip: rect(44px, 450px, 56px, 0);
    animation: glitch-anim2 2s infinite linear alternate-reverse;
  }
  .fade-enter-active,
  .fade-leave-active {
    @apply transition-opacity duration-200 ease-in-out;
  }
  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
  }
}

/* =========================================
   5. VENDOR OVERRIDES
   ========================================= */
/* Light Mode Leaflet Overrides (when not .dark) */
:root:not(.dark) .leaflet-container {
  background-color: #f3f4f6 !important; /* gray-100 */
  font-family: inherit !important;
}
:root:not(.dark) .leaflet-popup-content-wrapper,
:root:not(.dark) .leaflet-popup-tip {
  background-color: #ffffff !important;
  color: #111827 !important; /* gray-900 */
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

:root:not(.dark) .leaflet-control-zoom a {
  background-color: #ffffff !important;
  color: #374151 !important; /* gray-700 */
  border-color: #d1d5db !important; /* gray-300 */
}
:root:not(.dark) .leaflet-control-zoom a:hover {
  background-color: #f3f4f6 !important;
}

/* =========================================
   6. ANIMATIONS
   ========================================= */
@keyframes candy-cane-move {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 56px 0;
  }
}

@keyframes scanline {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100%);
  }
}
@keyframes glitch-anim {
  0% {
    clip: rect(30px, 9999px, 10px, 0);
  }
  20% {
    clip: rect(85px, 9999px, 90px, 0);
  }
  40% {
    clip: rect(10px, 9999px, 50px, 0);
  }
  60% {
    clip: rect(60px, 9999px, 20px, 0);
  }
  80% {
    clip: rect(25px, 9999px, 35px, 0);
  }
  100% {
    clip: rect(5px, 9999px, 80px, 0);
  }
}
@keyframes glitch-anim2 {
  0% {
    clip: rect(15px, 9999px, 60px, 0);
  }
  20% {
    clip: rect(50px, 9999px, 20px, 0);
  }
  40% {
    clip: rect(80px, 9999px, 10px, 0);
  }
  60% {
    clip: rect(30px, 9999px, 70px, 0);
  }
  80% {
    clip: rect(90px, 9999px, 40px, 0);
  }
  100% {
    clip: rect(10px, 9999px, 50px, 0);
  }
}
@keyframes glitch-skew {
  0% {
    transform: skew(0deg);
  }
  20% {
    transform: skew(-2deg);
  }
  40% {
    transform: skew(2deg);
  }
  60% {
    transform: skew(-1deg);
  }
  80% {
    transform: skew(1deg);
  }
  100% {
    transform: skew(0deg);
  }
}
